<!DOCTYPE html>
<html>

<head>
    <title>Charts</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="assets/js/api.js"></script>
</head>

<body class="p-4">

    <h2>ðŸ“ˆ Charts</h2>

    <div class="container-box">
        <canvas id="severityChart"></canvas>
    </div>

    <script>
        async function loadCharts() {
            const data = await apiGet("/stats");

            const labels = Object.keys(data.severity_counts);
            const counts = Object.values(data.severity_counts);

            new Chart(document.getElementById("severityChart"), {
                type: 'pie',
                data: {
                    labels,
                    datasets: [{
                        data: counts,
                        backgroundColor: ['#d9534f', '#f0ad4e', '#5bc0de', '#5cb85c'],
                    }]
                }
            });
        }

        loadCharts();
    </script>
</body>

</html>